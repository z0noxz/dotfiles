#!/bin/sh

args=" -p power:"
options="
    lock
    logout
    shutdown
    reboot
"

if [ "$1" = "off" ]; then
    dmenu_confirm                                                           \
        -p "shutdown:"                                                      \
        -nb "#fb2222"                                                       \
        -nf "#000000"                                                       \
        -sb "#000000"                                                       \
        -sf "#fb2222"                                                       \
        -cmd "sudo runit-init 0"
    return 0;
fi

case "$(printf "$options"                                                   \
| sed -e '/^$/d' -e 's/^[ \t]*//'                                           \
| sort                                                                      \
| dmenu_vtc${args})" in
lock)
    /usr/local/bin/slock -m "locked at $(date "+%H:%M:%S";
        echo '------------------';
        fortune /usr/share/fortunes/off/black-humor)"
    ;;
logout)
    killall dwm-run;;
shutdown)
    sudo runit-init 0;;
reboot)
    sudo runit-init 6;;
esac
